---
title: '설계 차이'
date: '2024-12-19'
tags: ['stateless', 'stateful', 'http']
draft: false
summary: 'Stateless와 Stateful의 차이를 Java로 구현하며 학습한 개인적인 정리입니다'
---

### Introduction

<TOCInline toc={props.toc} exclude="Introduction" />## 사전 지식.

- `핸드쉐이크(Handshake):` 클라이언트와 서버가 안전한 통신을 설정하기 위해 서로 신뢰할 수 있는 연결을 수립하는 초기 과정을 의미한다.
- `왜 핸드쉐이크가 필요한가?`
  - 인터넷에서 주고받는 데이터는 누구나 볼 수 있는 공용 네트워크를 통해 전송한다. 그러므로 데이터를 전송하기 전에 **클라이언트와 `서버 간의 안전한 암호화된 통로`**를 먼저 설정할 필요가 있다.
  - 핸드쉐이크는 이 과정에서 **`서로의 신원을 확인`하고, `암호화 방식`과 `키`를 협상**하여 데이터가 외부에서 노출되지 않도록 한다.
  - 핸드쉐이크는 한 번만 수행되며, 이후의 통신에서는 생성된 세션 키를 이용해 암호화된 데이터를 주고받기 때문에 성능에도 큰 영향을 주지 않는다.

## TLS란 무엇인가?

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9e80dde0-2fa0-439e-8ffe-2be2a8b0bc85/d4866db5-0639-41fd-b712-173fbd75f78d/image.png)

- `TLS(Transport Layer Security)`는 네트워크 상에서 데이터를 안전하게 전송하기 위한 **보안 프로토콜**이다.
- 웹 통신의 보안을 강화하기 위해 사용되며, 클라이언트와 서버 간에 암호화된 연결을 설정하여 개인정보 보호와 데이터 무결성을 보장한다.
- **`HTTPS`**는 HTTP에 TLS를 추가하여 보안을 강화한 프로토콜로, 웹사이트의 **`보안 인증**과 **데이터 암호화**`를 지원해 사용자의 정보를 안전하게 보호한다.

## TLS와 SSL의 차이점?

- TLS는 **SSL**(Secure Sockets Layer)의 후속 프로토콜로, `보안성을 개선한 버전`이라고 이해 하면 된다.
- SSL은 초기에 많은 사람들이 사용하였으나, 몇 가지 보안 취약점이 발견되면서 TLS로 대체하게 되었다.
- SSL 3.0을 기반으로 TLS 1.0이 개발되었으며, 그후에도 TLS는 점진적으로 보안을 강화해왔다.

## HTTP와 TLS의 차이점?

- **`HTTP`**는 응용 계층(Application Layer)에서 작동하는 프로토콜로, 주로 웹 문서를 전송하는 데 사용된다.
- 하지만, **TLS**는 전송 계층(Transport Layer)에서 데이터를 암호화하여 전송하므로, HTTPS로 통신할 때 GET/POST 메서드와 관계없이 모든 데이터가 안전하게 보호된다는 것이다.

## TLS 버전별 주요 특징

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9e80dde0-2fa0-439e-8ffe-2be2a8b0bc85/31108ab8-ce5c-4341-a311-6379a8ad66a2/image.png)

### TLS 1.0 버전

- SSL 3.0의 표준을 바탕으로 개발된 최초의 TLS 버전이다.
- 보안성을 높이기 위해 여러 암호화 알고리즘과 무결성 검증 기능을 추가했지만, CBC(Cipher Block Chaining) 모드에서 `암호화 취약성`이 존재했다.
- 이후 버전에서 보안 문제가 해결되어 현재는 잘 사용되지 않는 버전이다.

### TLS 1.1 버전

- TLS 1.0에서 발견된 **`CBC 모드 암호화 취약점`**을 해결하고, 각 메시지에 무작위 IV(Initialization Vector)를 도입했다.
  - `IV(Initialization Vector):` 매번 고유하게 설정되는 초기 값으로, 암호화된 메시지가 반복적으로 드러나지 않도록 돕는 중요한 역할을 한다.
- 에러 처리와 데이터 손상 복구 기능이 강화되어 전송 과정에서의 안정성이 향상 되었다.
- TLS 1.0과 핸드쉐이크 과정은 동일하지만, 보안과 안정성 측면에서 개선 되었다.

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/9e80dde0-2fa0-439e-8ffe-2be2a8b0bc85/025d0716-a8b0-4958-b87e-351820cb7d5a/image.png)

### TLS 1.2 버전

- SHA-1 알고리즘 대신 **SHA-2**를 사용하여 보안성이 더욱 강화되었다.
- 애플리케이션 데이터에 대해 `HMAC-SHA256` 같은 더 강력한 해시 함수를 도입해 데이터의 무결성을 확보했다.
- 사용자 지정 암호화 알고리즘을 사용할 수 있도록 확장 가능하게 설계되었다.
- 현재 가장 많이 사용되는 TLS 버전 중 하나이며, TLS 1.3 이전까지 표준으로 자리잡고 있다.

### TLS 1.2 핸드쉐이크 과정

1. 클라이언트가 서버에 지원하는 암호화 알고리즘과 프로토콜 버전을 알린다.
2. 서버가 클라이언트에 선택한 암호화 알고리즘과 인증서를 전송한다.
3. 클라이언트가 생성한 `Pre Master Secret`을 서버에 전송한다.
4. 클라이언트와 서버가 `Pre Master Secret`을 `Master Secret`으로 변환하여 세션 키 생성한다.
5. 인증된 양측이 세션 키를 사용해 대칭키 암호화 방식으로 데이터 송수신한다.

### TLS 1.3 버전

- **`핸드쉐이크 과정 간소화`**를 통해 보안성과 성능을 대폭 향상 시켰다. 불필요한 단계가 제거되어 통신 속도가 빨라졌다.
- `Diffie-Hellman` 키 교환 방식을 디폴트로 선택하여, 서버 인증서 암호화와 대칭키 암호화를 모두 효율적으로 처리한다.
- 과거에 사용되던 `SHA-1` 등 취약한 암호화 알고리즘을 제거하고, 더욱 높은 보안성을 제공한다.
- TLS 1.2와 비교해 간결한 구조로 인해 **`성능이 향상`**되고, 보안 또한 한층 강화되었다.

### TLS 1.3 핸드쉐이크 과정

1. 클라이언트가 서버에 `Diffie-Hellman key`와 암호화 알고리즘을 제안하며 공개키를 전송한다.
2. 서버가 `Diffie-Hellman key`와 공개키를 전송해 키 교환이 완료되고, `Master Secret` 생성한다.
3. 클라이언트와 서버가 생성한 `Master Secret`을 통해 세션 키 생성한다.
4. 세션 키를 이용해 대칭키 암호화 방식으로 안전한 통신 시작한다.

## 정리하기

- TLS는 웹 통신 보안을 강화하기 위한 필수적인 프로토콜로, 각 버전은 점진적으로 보안성과 성능을 개선해 왔다.
- TLS 1.0과 1.1은 현재 거의 사용되지 않으며, TLS 1.2는 안정성과 보안성이 강화된 표준으로 널리 쓰이고 있다.
- TLS 1.3은 간소화된 핸드쉐이크와 향상된 암호화로 보안과 속도에서 한층 더 개선된 최신 버전이다.